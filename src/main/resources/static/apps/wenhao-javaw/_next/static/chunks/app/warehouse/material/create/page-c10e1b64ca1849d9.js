(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{7137:function(e,t,n){Promise.resolve().then(n.bind(n,6796))},2196:function(e,t,n){"use strict";n.d(t,{R1:function(){return r},N6:function(){return b},_R:function(){return x},X:function(){return v},Kk:function(){return I},tR:function(){return G},UT:function(){return m},Gs:function(){return _},Gx:function(){return y},zf:function(){return f},x0:function(){return u},z2:function(){return k},hU:function(){return S},nW:function(){return C},v0:function(){return p},aG:function(){return j},hI:function(){return g},eB:function(){return T},NE:function(){return R},Ju:function(){return M},Wk:function(){return P},eN:function(){return E},DP:function(){return L},_b:function(){return z},$_:function(){return h},tu:function(){return B},lK:function(){return U},tV:function(){return c},_U:function(){return i},Gb:function(){return N},VR:function(){return w},Mf:function(){return F},qL:function(){return d}});var a=n(5953),s=n(1712);n(2040);let o=a.Z.create({baseURL:"/backend",withCredentials:!0,timeout:1e5});function l(){s.Z.remove("isv_token")}async function c(e){return o.post("/wms/warehouse/get",{},{params:e}).then(e=>(console.log(e),e.data.data))}async function i(e,t){return o.post("/wms/warehouse/get",e,{params:t}).then(e=>(console.log(e),e.data.data))}async function r(e){return o.post("/wms/warehouse/add",e).then(e=>console.log(e))}async function u(e){return o.post("/wms/warehouse/delete",{id:e}).then(e=>console.log(e))}async function d(e){return o.post("/wms/warehouse/update",e).then(e=>console.log(e))}async function h(e,t){return o.post("/wms/storagelocation/get",e,{params:t}).then(e=>(console.log(e),e.data.data))}async function m(e){return o.post("/wms/storagelocation/add",e).then(e=>(console.log(e),e.data.data))}async function f(e){return o.post("/wms/storagelocation/delete",e).then(e=>(console.log(e),e.data.data))}async function p(e,t){return o.post("/wms/material/get",t,{params:e}).then(e=>(console.log(e),e.data.data))}async function g(e){return o.post("/wms/material/get",e).then(e=>(console.log(e),e.data.data))}async function x(e){return o.post("/wms/material/add",e).then(e=>(console.log(e),e.data.data))}async function w(e){return o.post("/wms/material/update",e).then(e=>(console.log(e),e.data.data))}async function y(e){return o.post("/wms/material/delete",e).then(e=>(console.log(e),e.data.data))}async function j(){return o.post("/wms/rfidmaterial/get").then(e=>(console.log(e),e.data.data))}async function v(e){return o.post("/wms/rfidmaterial/add",e).then(e=>(console.log(e),e.data.data))}async function b(e){return o.post("/wms/inbound/add",e).then(e=>(console.log(e),e.data.data))}async function N(e){return o.post("/wms/inbound/update",e).then(e=>(console.log(e),e.data.data))}async function k(e){return o.post("/wms/inbound/get",{},{params:e}).then(e=>(console.log(e),e.data.data))}async function C(e,t){return o.post("/wms/inbound/get",e,{params:t}).then(e=>(console.log(e),e.data.data))}async function _(e){return o.post("/wms/inbound/delete",e).then(e=>(console.log(e),e.data.data))}async function S(e){return o.post("/wms/inbound/detail",e).then(e=>(console.log(e),e.data.data))}async function I(e){return o.post("/wms/outbound/add",e).then(e=>(console.log(e),e.data.data))}async function T(e){return o.post("/wms/outbound/get",{},{params:e}).then(e=>(console.log(e),e.data.data))}async function M(e){return o.post("/wms/outbound/get",e).then(e=>(console.log(e),e.data.data))}async function F(e){return o.post("/wms/outbound/update",e).then(e=>(console.log(e),e.data.data))}async function R(e){return o.post("/wms/outbound/detail",e).then(e=>(console.log(e),e.data.data))}async function G(e){return o.post("/wms/stocktaking/add",e).then(e=>(console.log(e),e.data.data))}async function E(e){return o.post("/wms/stocktaking/get",{},{params:e}).then(e=>(console.log(e),e.data.data))}async function z(e,t){return o.post("/wms/stocktaking/get",e,{params:t}).then(e=>(console.log(e),e.data.data))}async function L(e){return o.post("/wms/stocktaking/detail",e).then(e=>(console.log(e),e.data.data))}async function B(e){return o.post("/wms/warehouse/namemap",{},{params:e}).then(e=>(console.log(e),e.data.data))}async function P(e){return o.post("/wms/storagelocation/namemap",{},{params:e}).then(e=>(console.log(e),e.data.data))}async function U(e){return o.post("/wms/warehousestoragelocation/idmap",{},{params:e}).then(e=>(console.log(e),e.data.data))}o.interceptors.request.use(e=>(null!=s.Z.get("isv_token")&&(e.headers.userToken=s.Z.get("isv_token")),e),e=>Promise.reject(e)),o.interceptors.response.use(function(e){return 401===e.data.code?(l(),Promise.reject()):e},function(e){return(console.log(e),401===e.response.status)?(l(),Promise.reject()):Promise.reject(e)})},6796:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var a=n(9268),s=n(6006),o=n(9698),l=n(9158);n(690);var c=n(6008),i=n(2196),r=e=>{let{isOpen:t,onClose:n}=e,[l,c]=(0,s.useState)([]),[r,u]=(0,s.useState)([]),[d,h]=(0,s.useState)([]),m=null,f=(0,s.useRef)(null),p=(0,s.useRef)(null),[g,x]=(0,s.useState)(!1),[w,y]=(0,s.useState)({x:0,y:0,width:0,height:0});(0,s.useEffect)(()=>{j(),(0,i.tV)({pageNum:1,pageSize:99999999}).then(e=>{c(e.list)})},[]);let j=()=>{document.getElementById("shelf-container").onselectstart=function(){return!1}},v=()=>{console.log("wh info",m),b()},b=()=>{let e=[];for(var t=0;t<10;t++)e.push({shelfId:t,shelfName:"A"+t,sn:t,shelfAreaNos:[]}),e.forEach(e=>{e.shelfAreaNos=[];for(let t=4;t>=0;t--)e.shelfAreaNos.push({shelfId:e.shelfId,areaId:t,areaName:t+1})});h(e),console.log("shelf data",d)},N=e=>{e&&(m=e.selectedItem,v())},k=async()=>{n()},C=(e,t)=>{console.log("shelf",e,t);let n=null!=r.find(e=>e.shelfId==t.shelfId&&e.areaId==t.areaId);n||u([...r,t]),console.log("selectLocation",r),n&&r.splice(r.indexOf(t),1),e.target.classList.toggle("bg-sky-200")};return(0,a.jsx)(o.u_l,{open:t,modalHeading:"Select Expect Location",modalLabel:"Material Management",primaryButtonText:"Ok",secondaryButtonText:"Cancel",onRequestClose:()=>{n()},onRequestSubmit:k,height:"800px",children:(0,a.jsxs)("div",{style:{height:"500px"},children:[(0,a.jsxs)("div",{style:{width:"50%"},children:[(0,a.jsx)(o.CtY,{titleText:"Warehouse",items:l,itemToString:e=>e?e.name:"",placeholder:"Choose warehouse",onChange:e=>N(e)}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)("span",{className:"text-gray-500",children:"Please select the warehouse where you want to place your materials"})})]}),(0,a.jsxs)("div",{className:"bg-white p-5 mt-5",children:[(0,a.jsx)("div",{id:"shelf-container",style:{width:"100%"},children:(0,a.jsxs)("div",{className:"flex flex-row text-center relative",ref:f,onMouseDown:e=>{x(!0);let t=f.current.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;y({x:n,y:a,width:0,height:0})},onMouseMove:e=>{if(g){let t=f.current.getBoundingClientRect(),n=e.clientX-t.left-w.x,a=e.clientY-t.top-w.y;y(e=>({...e,width:n,height:a}));let s=document.querySelectorAll(".shelf-area");console.log("event",e),s.forEach(t=>{t.classList.remove("bg-sky-200");let n=t.getBoundingClientRect();n.x<e.clientX&&n.y<e.clientY&&n.top<e.clientY&&(t.classList.add("bg-sky-200"),console.log("t",t))})}},onMouseUp:()=>{x(!1)},children:[d.map((e,t)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{style:{width:"50px",marginLeft:t%2==0?"30px":"0px"},className:" relative",children:[(0,a.jsx)("div",{style:{borderTop:"4px solid #1264FF",borderBottom:"4px solid #1264FF",borderLeft:t%2==1?"none":"4px solid #1264FF",borderRight:t%2==0?"2px solid #1264FF":"4px solid #1264FF"},children:e.shelfAreaNos.map((t,n)=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"shelf-area content-center",id:e.shelfName+"-"+t.areaName,style:{height:"60px",border:"2px solid #1264FE"},onClick:e=>C(e,t),children:t.areaName},n)}))}),(0,a.jsx)("div",{className:"font-semibold mt-2",children:e.shelfName})]},t)})),g&&(0,a.jsx)("div",{ref:p,style:{position:"absolute",left:w.x,top:w.y,width:w.width,height:w.height,backgroundColor:"rgba(255, 0, 0, 0.1)",pointerEvents:"none"}})]})}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsxs)("div",{className:"text-xs w-90",style:{background:"#F2F1F1",width:"auto"},children:[(0,a.jsx)("p",{children:"*You can drap the map by hold the right mouse button"}),(0,a.jsx)("p",{children:"*You can select multiple shelves at the same time with the left mouse button"})]})})]})]})})},u=function(){let e=(0,c.useRouter)(),[t,n]=(0,s.useState)({codeInvalid:!1,nameInvalid:!1}),[u,d]=(0,s.useState)({product_code:"",name:"",product_type:"",unit:"",specification:"",max:"",min:"",status:"",expect_wh_id:"",expact_stock_location_id:"",note:""}),[h,m]=(0,s.useState)([]),[f,p]=(0,s.useState)([]),[g,x]=(0,s.useState)({}),[w,y]=(0,s.useState)({}),[j,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(0,i.tV)({pageNum:1,pageSize:99999999}).then(e=>{m(e.list)})},[]),console.log(u,g,w,"/apps/wenhao-javaw/warehouse/material"),(0,s.useEffect)(()=>{g.selectedItem?(0,i.$_)({warehouse_id:g.selectedItem.id},{pageNum:1,pageSize:99999999}).then(e=>{p(e.list)}):p([])},[g]);let b=e=>{let{id:t,value:n}=e.target;d(e=>({...e,[t]:n}))},N=async t=>{t.preventDefault();let a={codeInvalid:""===u.product_code,nameInvalid:""===u.name};n(a),console.log(a,u),Object.values(a).some(e=>e)||((0,i._R)(u).then(()=>{d({product_code:"",name:"",product_type:"",unit:"",note:""}),n({codeInvalid:!1,nameInvalid:!1})}),e.push("".concat("/apps/wenhao-javaw","/warehouse/material")))};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:" mt-8",children:(0,a.jsxs)(o.rjZ,{className:"pl-0",children:[(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Material Code",id:"product_code",placeholder:"Material Code",invalid:t.codeInvalid,invalidText:"This field cannot be empty",value:u.product_code,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Material Name",id:"name",placeholder:"Material Name",invalid:t.nameInvalid,invalidText:"This field cannot be empty",value:u.name,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Material Type",id:"product_type",placeholder:"Material Type",value:u.product_type,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Unit",id:"unit",placeholder:"Unit",value:u.unit,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Specification",id:"specification",placeholder:"Specification",value:u.specification,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Maximum safty stock",id:"max",placeholder:"Maximum safty stock",value:u.max,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Minimum safty stock",id:"min",placeholder:"Minimum safty stock",value:u.min,onChange:b})}),(0,a.jsx)(o.sgG,{sm:2,md:4,lg:4,children:(0,a.jsx)(o.oil,{className:"mb-8",labelText:"Status",id:"status",placeholder:"Status",value:u.status,onChange:b})}),(0,a.jsxs)(o.sgG,{sm:2,md:4,lg:4,children:[(0,a.jsx)("div",{children:(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:" Except Location"})}),(0,a.jsx)("div",{className:"mt-2 mb-5",children:(0,a.jsx)(o.zxk,{onClick:()=>{v(!0)},kind:"tertiary",size:"sm",renderIcon:l.vv,children:"Warehouse"})})]}),(0,a.jsx)(o.sgG,{sm:4,md:8,lg:16,children:(0,a.jsx)(o.Kx8,{className:"mb-8 w-full",labelText:"Note",rows:4,id:"note",value:u.note,onChange:b})})]})}),(0,a.jsxs)("div",{className:"flex space-x-4 mt-4 justify-center ",children:[(0,a.jsx)(o.zxk,{size:"sm",onClick:N,children:"Submit"}),(0,a.jsx)(o.zxk,{size:"sm",kind:"tertiary",onClick:()=>{e.push("".concat("/apps/wenhao-javaw","/warehouse/material"))},children:"Cancel"})]}),(0,a.jsx)(r,{isOpen:j,onClose:()=>{v(!1)}})]})},d=function(){let e=(0,c.useRouter)();return(0,a.jsxs)("div",{children:[(0,a.jsxs)(o.aGc,{children:[(0,a.jsx)(o.gN6,{children:(0,a.jsx)("a",{onClick:()=>{e.push("".concat("/apps/wenhao-javaw","/home"))},children:"Home"})}),(0,a.jsx)(o.gN6,{onClick:()=>{e.push("".concat("/apps/wenhao-javaw","/warehouse"))},children:"Warehouse"}),(0,a.jsx)(o.gN6,{onClick:()=>{e.push("".concat("/apps/wenhao-javaw","/warehouse/material"))},children:"Material"}),(0,a.jsx)(o.gN6,{onClick:()=>{e.push("".concat("/apps/wenhao-javaw","/warehouse/material/create"))},children:"Create"})]}),(0,a.jsx)("div",{className:"bx--col-lg-16 flex justify-between items-center",children:(0,a.jsx)(o.X6q,{className:"mt-2 text-[28px] font-normal",children:"Create a Material"})}),(0,a.jsx)(u,{})]})}},690:function(){}},function(e){e.O(0,[313,307,158,531,698,744],function(){return e(e.s=7137)}),_N_E=e.O()}]);