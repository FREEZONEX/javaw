<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>
        Asset Management
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100">
<div class="flex h-screen">
    <!-- Sidebar -->
    <div class="w-64 bg-white shadow-md">
        <div class="p-6">
            <div class="flex items-center space-x-2 font-semibold text-green-600">
                <div class="text-2xl">
                    <i class="fas fa-tools"></i>
                </div>
                <span>Asset Management</span>
            </div>
            <nav class="mt-8">
                <div class="mt-2 bg-green-200">
                    <a href="#" class="flex items-center p-2 space-x-3 rounded-md hover:bg-gray-200">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </div>
                <div class="mt-2">
                    <a href="/apps/wenhao-javaw/inventory" class="flex items-center p-2 space-x-3 rounded-md hover:bg-gray-200">
                        <i class="fas fa-boxes"></i>
                        <span>Inventory</span>
                    </a>
                </div>
                <div class="mt-2">
                    <a href="#" class="flex items-center p-2 space-x-3 rounded-md hover:bg-gray-200">
                        <i class="fas fa-laptop"></i>
                        <span>Assets</span>
                    </a>
                </div>
                <div class="mt-2">
                    <a href="#" class="flex items-center p-2 space-x-3 rounded-md hover:bg-gray-200">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Plan</span>
                    </a>
                </div>
            </nav>
        </div>
    </div>
    <!-- Main Content -->
    <div class="flex-1 p-8">
        <!-- Details Section -->
        <div class="grid grid-cols-5 gap-6 mb-6">
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    Operating days
                </div>
                <div class="text-3xl font-bold text-gray-900 mt-2">
                    1234
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    Current temperature (Â°C)
                </div>
                <div class="text-3xl font-bold text-gray-900 mt-2">
                    23
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    Location
                </div>
                <div class="text-3xl font-bold text-gray-900 mt-2">
                    Warehouse1
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    Operator
                </div>
                <div class="text-3xl font-bold text-gray-900 mt-2">
                    John Mike 9661234567
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    Status
                </div>
                <div class="text-3xl font-bold text-green-500 mt-2">
                    Normal
                </div>
            </div>
        </div>
        <!-- Maintenance Section -->
        <div class="grid grid-cols-2 gap-6 mb-6">
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    Next maintenance
                </div>
                <div class="text-3xl font-bold text-gray-900 mt-2">
                    2024/2/12
                </div>
                <a class="text-indigo-600 hover:text-indigo-900 text-sm font-medium mt-4" href="#">
                    See all
                </a>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-sm font-medium text-gray-500">
                    To be disposed
                </div>
                <div class="text-3xl font-bold text-gray-900 mt-2">
                    2024/2/12
                </div>
            </div>
        </div>
        <!-- Events Section -->
        <div class="flex flex-col mt-4 mb-6 ">
            <div class="overflow-x-auto">
                <div class="flex">

                <div class="align-middle inline-block min-w-3/5">
                    <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Inv. ID</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Asset</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stock</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Location</th>
<!--                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Owner</th>-->
<!--                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">3D Model</th>-->
<!--                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"></th>-->
                            </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="tableBody">
                            <!-- Repeat for each row -->
                            <tr>
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">ad123</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Cutting machine</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">12</td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Warehouse 1</td>
<!--                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Unknown</td>-->
<!--                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-->
<!--                                    <a href="#" class="text-indigo-600 hover:text-indigo-900">View</a>-->
<!--                                </td>-->
<!--                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">-->
<!--                                    <a href="#" class="text-indigo-600 hover:text-indigo-900">Details</a>-->
<!--                                    <a href="#" class="text-red-600 hover:text-red-900 ml-4">Delete</a>-->
<!--                                </td>-->
                            </tr>
                            <!-- Repeat for each row -->
                            <!-- ... other rows ... -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Image Section -->
                    <div class="ml-4 flex items-center justify-center">
                        <div class="w-48 h-48 rounded-full" id="loop-a"></div>
                        <!-- Replace the above line with your image code -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Trends Section -->
        <div class="grid grid-cols-3 gap-6">
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-lg font-semibold text-gray-900">
                    Vibration trend
                </div>
                <div id="ppo" class="bg-white shadow rounded-lg p-6 w-full h-4/5"></div>
                <div class="text-3xl font-bold text-blue-500 mt-4">
                    1200
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-lg font-semibold text-gray-900">
                    Temperature trend
                </div>
                <div id="overlap-wrapper" class="bg-white shadow rounded-lg p-6 w-full h-4/5"></div>
                <div class="text-3xl font-bold text-blue-500 mt-4">
                    1200
                </div>
            </div>
            <div class="bg-white shadow rounded-lg p-6">
                <div class="text-lg font-semibold text-gray-900">
                    Energy consumption trend
                </div>
                <div id="loop-b" class="bg-white shadow rounded-lg p-6 w-full h-4/5"></div>
                <div class="text-3xl font-bold text-blue-500 mt-4">
                    1200
                </div>
            </div>
        </div>
<!--        &lt;!&ndash; Fault Analysis Section &ndash;&gt;-->
<!--        <div class="bg-white shadow rounded-lg p-6 mt-6">-->
<!--            <div class="text-lg font-semibold text-gray-900">-->
<!--                Fault analysis-->
<!--            </div>-->
<!--            <img alt="Placeholder image for fault analysis pie chart" class="mt-4" height="300" src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-rEiyTYq8Mv8plYLFSJy5qIKL/user-Yc1mWgVexpGywTcUXKsrlRu2/img-WcSOy3H3aOd0d94gKymFGIVk.png?st=2024-01-23T01%3A49%3A05Z&amp;se=2024-01-23T03%3A49%3A05Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2024-01-22T21%3A52%3A08Z&amp;ske=2024-01-23T21%3A52%3A08Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=SXN3dr8EfQgD%2BxxfX5Cxea1c5k11%2Bbg03fPhxSCdBIE%3D" width="300"/>-->
<!--        </div>-->
    </div>
</div>
</body>

<script>
    // ä½¿ç¨ Fetch API è·åæ°æ®
    fetch('/apps/wenhao-javaw/package/history')
        .then(response => response.json())
        .then(data => {
            // è·åè¡¨æ ¼ä¸»ä½åç´ 
            const tableBody = document.getElementById('tableBody');

            // éå API è¿åçæ°æ®
            data.slice(0, 4).forEach(item => {
                // åå»ºè¡¨æ ¼è¡
                const row = document.createElement('tr');

                // éåæ¯ä¸ªå±æ§ï¼å¹¶åå»ºç¸åºçååæ ¼
                Object.values(item).slice(0, 4).forEach(value => {
                    const cell = document.createElement('td')
                    // cell.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';
                    cell.className = 'px-6 py-4 text-sm text-gray-500';

                    cell.textContent = value;
                    row.appendChild(cell);
                });

                // å¨æ¯è¡çæ«å°¾æ·»å  "Details" å "Delete" å
                const actionCell1 = document.createElement('td');
                actionCell1.className = 'px-6 py-4 whitespace-nowrap text-sm text-gray-500';
                const viewLink = document.createElement('a');
                viewLink.href = '#';
                viewLink.className = 'text-indigo-600 hover:text-indigo-900';
                viewLink.textContent = 'View';
                actionCell1.appendChild(viewLink);

                // å¨æ¯è¡çæ«å°¾æ·»å  "Details" å "Delete" å
                const actionCell = document.createElement('td');
                actionCell.className = 'px-6 py-4 whitespace-nowrap text-right text-sm font-medium';

                const detailsLink = document.createElement('a');
                detailsLink.href = '#';
                detailsLink.className = 'text-indigo-600 hover:text-indigo-900';
                detailsLink.textContent = 'Details';

                const deleteLink = document.createElement('a');
                deleteLink.href = '#';
                deleteLink.className = 'text-red-600 hover:text-red-900 ml-4';
                deleteLink.textContent = 'Delete';

                actionCell.appendChild(detailsLink);
                actionCell.appendChild(deleteLink);


                // row.appendChild(actionCell1);

                // å° "Details" å "Delete" åæ·»å å°è¡
                // row.appendChild(actionCell);

                // å°è¡æ·»å å°è¡¨æ ¼ä¸»ä½
                tableBody.appendChild(row);
            });
        })
        .catch(error => console.error('Error fetching data:', error));


    var chartDom = document.getElementById('ppo');
    // chartDom.classList.add(' w-full h-4/5');
    chartDom.style.width = 'w-full'; // Set your preferred width
    chartDom.style.height = 'h-full'; // Set your preferred height
    var myChart1 = echarts.init(chartDom);
    var option1;

    option1 = {
        tooltip: {
            formatter: '{a} <br/>{b} : {c}%'
        },
        series: [
            {
                name: 'Pressure',
                type: 'gauge',
                axisLabel: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: false
                },
                detail: {
                    valueAnimation: false,
                    formatter: '{value}'
                },
                progress: {
                    show: true
                },
                detail: {
                    valueAnimation: true,
                    formatter: '{value}',
                    color: 'white'
                },
                data: [
                    {
                        value: 50,
                    }
                ]
            }
        ]
    };

    option1 && myChart1.setOption(option1);

    // è®¾ç½®å®æ¶å¨å®ææ´æ°æ°æ®
    setInterval(function () {
        // çææ°çéæºæ°å¼ï¼ä¾å¦0å°100ä¹é´
        var newValue = Math.round(Math.random() * 100);

        // æ´æ°å¾è¡¨æ°æ®
        option1.series[0].data[0].value = newValue;
        myChart1.setOption(option1);
    }, 1000); // æ¯2ç§æ´æ°ä¸æ¬¡ï¼æ¨å¯ä»¥æ ¹æ®éè¦è°æ´è¿ä¸ªæ¶é´é´é



    var chartDom = document.getElementById('overlap-wrapper');
    chartDom.style.width = 'w-full'; // Set your preferred width
    chartDom.style.height = 'h-full'; // Set your preferred height
    var myChart8 = echarts.init(chartDom);
    var option8;

    option8 = {
        series: [
            {
                type: 'gauge',
                startAngle: 180,
                endAngle: 0,
                center: ['50%', '60%'],
                radius: '90%',
                min: 0,
                max: 1,
                splitNumber: 8,
                axisLine: {
                    lineStyle: {
                        width: 6,
                        color: [
                            [0.25, '#FF6E76'],
                            [0.5, '#FDDD60'],
                            [0.75, '#58D9F9'],
                            [1, '#7CFFB2']
                        ]
                    }
                },
                pointer: {
                    icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                    length: '12%',
                    width: 20,
                    offsetCenter: [0, '-60%'],
                    itemStyle: {
                        color: 'auto'
                    }
                },
                axisTick: {
                    show: false,

                },
                splitLine: {
                    show: false,

                },
                axisLabel: {
                    color: '#464646',
                    fontSize: 20,
                    distance: -60,
                    rotate: 'tangential',
                    show: false,

                    formatter: function (value) {
                        if (value === 0.875) {
                            return 'Grade A';
                        } else if (value === 0.625) {
                            return 'Grade B';
                        } else if (value === 0.375) {
                            return 'Grade C';
                        } else if (value === 0.125) {
                            return 'Grade D';
                        }
                        return '';
                    }
                },
                title: {
                    offsetCenter: [0, '-10%'],
                    fontSize: 20
                },
                detail: {
                    fontSize: 30,
                    offsetCenter: [0, '-35%'],
                    valueAnimation: true,
                    formatter: function (value) {
                        return Math.round(value * 100) + '';
                    },
                    color: 'inherit'
                },
                data: [
                    {
                        value: 0.7
                    }
                ]
            }
        ]
    };

    option8 && myChart8.setOption(option8);

    // è®¾ç½®å®æ¶å¨å®ææ´æ°æ°æ®
    setInterval(function () {
        // çææ°çéæºæ°å¼ï¼ä¾å¦0å°100ä¹é´
        var newValue = Math.round(Math.random() * 100);

        // æ´æ°å¾è¡¨æ°æ®
        option8.series[0].data[0].value = newValue*0.01;
        myChart8.setOption(option8);
    }, 1000); // æ¯2ç§æ´æ°ä¸æ¬¡ï¼æ¨å¯ä»¥æ ¹æ®éè¦è°æ´è¿ä¸ªæ¶é´é´é


    var chartDom = document.getElementById('loop-b');
    chartDom.style.width = 'w-full'; // Set your preferred width
    chartDom.style.height = 'h-full'; // Set your preferred height
    var myChart6 = echarts.init(chartDom);
    var option6;

    option6 = {
        series: [
            {
                type: 'gauge',
                center: ['50%', '60%'],
                startAngle: 200,
                endAngle: -20,
                min: 0,
                max: 60,
                splitNumber: 12,
                itemStyle: {
                    color: '#FFAB91'
                },
                progress: {
                    show: true,
                    width: 10
                },
                pointer: {
                    show: false
                },
                axisLine: {
                    show: false // éèåå²çº¿
                },
                axisTick: {
                    show: false // éèåå²çº¿
                },
                splitLine: {
                    show: false // éèåå²çº¿
                },
                axisLabel: {
                    show: false // éèåå²çº¿
                },
                anchor: {
                    show: false
                },
                title: {
                    show: false
                },
                detail: {
                    valueAnimation: true,
                    width: '60%',
                    lineHeight: 40,
                    borderRadius: 8,
                    offsetCenter: [0, '-15%'],
                    fontSize: 20,
                    fontWeight: 'bolder',
                    formatter: '{value}',
                    color: 'inherit'
                },
                data: [
                    {
                        value: 20
                    }
                ]
            },
            {
                type: 'gauge',
                center: ['50%', '60%'],
                startAngle: 200,
                endAngle: -20,
                min: 0,
                max: 60,
                itemStyle: {
                    color: '#FD7347'
                },
                progress: {
                    show: true,
                    width: 8
                },
                pointer: {
                    show: false
                },
                axisLine: {
                    show: false
                },
                axisTick: {
                    show: false
                },
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: false
                },
                detail: {
                    show: false
                },
                data: [
                    {
                        value: 20
                    }
                ]
            }
        ]
    };
    setInterval(function () {
        const random = +(Math.random() * 60).toFixed(2);
        myChart6.setOption({
            series: [
                {
                    data: [
                        {
                            value: random
                        }
                    ]
                },
                {
                    data: [
                        {
                            value: random
                        }
                    ]
                }
            ]
        });
    }, 1000);

    var chartDom = document.getElementById('loop-a');
    var myChart5 = echarts.init(chartDom);
    var option5;

    const gaugeData = [
        {
            value: 20,
            title: {
                offsetCenter: ['-40%', '80%']
            },
            detail: {
                offsetCenter: ['-40%', '95%']
            }
        },
        {
            value: 40,
            title: {
                offsetCenter: ['0%', '80%']
            },
            detail: {
                offsetCenter: ['0%', '95%']
            }
        },
        {
            value: 60,
            title: {
                offsetCenter: ['40%', '80%']
            },
            detail: {
                offsetCenter: ['40%', '95%']
            }
        }
    ];
    option5 = {
        series: [
            {
                type: 'gauge',
                anchor: {
                    show: true,
                    showAbove: true,
                    size: 18,
                    itemStyle: {
                        color: '#FAC858'
                    }
                },
                axisLabel: {
                    show: false // éèåå²çº¿
                },
                axisTick: {
                    show: false // éèåå²çº¿
                },
                splitLine: {
                    show: false // éèåå²çº¿
                },
                pointer: {
                    icon: 'path://M2.9,0.7L2.9,0.7c1.4,0,2.6,1.2,2.6,2.6v115c0,1.4-1.2,2.6-2.6,2.6l0,0c-1.4,0-2.6-1.2-2.6-2.6V3.3C0.3,1.9,1.4,0.7,2.9,0.7z',
                    width: 8,
                    length: '80%',
                    offsetCenter: [0, '8%']
                },
                progress: {
                    show: true,
                    overlap: true,
                    roundCap: true
                },
                axisLine: {
                    roundCap: true
                },
                data: gaugeData,
                title: {
                    fontSize: 14
                },
                detail: {
                    width: 40,
                    height: 14,
                    fontSize: 14,
                    color: '#fff',
                    backgroundColor: 'inherit',
                    borderRadius: 3,
                    formatter: '{value}%'
                }
            }
        ]
    };
    setInterval(function () {
        gaugeData[0].value = +(Math.random() * 100).toFixed(2);
        gaugeData[1].value = +(Math.random() * 100).toFixed(2);
        gaugeData[2].value = +(Math.random() * 100).toFixed(2);
        myChart5.setOption({
            series: [
                {
                    data: gaugeData
                }
            ]
        });
    }, 1000);

    option5 && myChart5.setOption(option5);

    option6 && myChart6.setOption(option6);

    window.addEventListener('load', function () {
        // æ¹åå¾è¡¨å°ºå¯¸ï¼å¨å®¹å¨å¤§å°åçæ¹åæ¶éè¦æå¨è°ç¨
        myChart1.resize();
        myChart5.resize();
        myChart6.resize();
        myChart8.resize();

    });
    window.addEventListener('resize', function () {
        // æ¹åå¾è¡¨å°ºå¯¸ï¼å¨å®¹å¨å¤§å°åçæ¹åæ¶éè¦æå¨è°ç¨
        myChart1.resize();
        myChart5.resize();
        myChart6.resize();
        myChart8.resize();

    });


</script>
</html>
